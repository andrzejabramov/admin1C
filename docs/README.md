# ib_1c ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è 1–°

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑ 1–° —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ib_1c`: —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –±—ç–∫–∞–ø–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

| –£—Ä–æ–≤–µ–Ω—å                      | –§–æ—Ä–º–∞—Ç                                   | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                                      | –î–æ—Å—Ç—É–ø                                |
| ---------------------------- | ---------------------------------------- | ------------------------------------------------------- | ------------------------------------- |
| **–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞**       | `ib_1c help`<br>`ib_1c <–∫–æ–º–∞–Ω–¥–∞> --help` | –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–º–∞–Ω–¥—ã –ø—Ä—è–º–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ      | –í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞         |
| **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | `.md` —Ñ–∞–π–ª—ã –≤ `docs/`                    | –ò–∑—É—á–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –ø—Ä–∏–º–µ—Ä–æ–≤, —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: `/opt/1cv8/scripts/docs/` |

## –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–ø—Ä–∞–≤–∫–µ

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
ib_1c help

# –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ
ib_1c backup --help
ib_1c rm --help
ib_1c storage --help
```

üí° –ü—Ä–∞–≤–∏–ª–æ: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–µ—é—Ç —Ñ–ª–∞–≥ --help / -h. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ib_1c help –∏–ª–∏ –≤—ã–∑–æ–≤ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤: ib_1c.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø —Ç–µ—Å—Ç–æ–≤–æ–π –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–µ PostgreSQL Custom

ib_1c backup --format dump --ib test_db

### –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—ç–∫–∞–ø —Ç–µ—Å—Ç–æ–≤–æ–π –ò–ë (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)

ib_1c rm --ib test_db --timestamp 20260206_124957 --confirm

### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

ib_1c storage

### –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ò–ë –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–°

ib_1c storage update-ib-list --confirm

üí° –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞: ib_1c help –∏–ª–∏ ib_1c <–∫–æ–º–∞–Ω–¥–∞> --help

## ‚öôÔ∏è –°–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                             | –ö–æ–º–∞–Ω–¥—ã                                                                                               |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| [`backup`](backup.md)       | –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö `.dump` (PostgreSQL Custom) –∏ `.sql.gz` (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL)                  | `ib_1c backup --format {dump,sql} --ib –ò–ë [–ò–ë ...] [--dry-run]`                                       |
| [`rm`](cmd.md#rm)           | –†—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–µ, –¥–∞—Ç–µ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ (`--all`). –¢—Ä–µ–±—É–µ—Ç `--confirm` –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. | `ib_1c rm --ib –ò–ë [--timestamp –ú–ï–¢–ö–ê \| --older-than –î–ê–¢–ê \| --all] [--dry-run] [--confirm]`          |
| [`storage`](cmd.md#storage) | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞, —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –ò–ë                   | `ib_1c storage`<br>`ib_1c storage list-ibs`<br>`ib_1c storage update-ib-list [--dry-run] [--confirm]` |

## üå≥ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/opt/1cv8/scripts/
‚îú‚îÄ‚îÄ orchestrator.py # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (ib_1c)
‚îú‚îÄ‚îÄ config/
‚îÇ ‚îî‚îÄ‚îÄ global.sh # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: PG_HOST, PG_PORT, BACKUP_ROOT, SSH_KEY
‚îú‚îÄ‚îÄ core/ # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)
‚îÇ ‚îú‚îÄ‚îÄ engine.py # run_engine() ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤
‚îÇ ‚îú‚îÄ‚îÄ utils.py # –¶–≤–µ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ ‚îî‚îÄ‚îÄ exceptions.py # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ ib_list.conf # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –ò–ë –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ .version # –í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îÇ
‚îú‚îÄ‚îÄ backup/ # üì¶ –î–æ–º–µ–Ω: –±—ç–∫–∞–ø—ã
‚îÇ ‚îú‚îÄ‚îÄ engines/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ backup.sh # pg_dump —á–µ—Ä–µ–∑ SSH
‚îÇ ‚îú‚îÄ‚îÄ services/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ __init__.py # –ü—É—Å—Ç–æ–π –º–∞—Ä–∫–µ—Ä –º–æ–¥—É–ª—è
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ backup_service.py # backup_ib(), backup_multiple()
‚îÇ ‚îî‚îÄ‚îÄ adapters/cli/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py # –ü—É—Å—Ç–æ–π –º–∞—Ä–∫–µ—Ä –º–æ–¥—É–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ backup_adapter.py # CLI-–∞–¥–∞–ø—Ç–µ—Ä (argparse ‚Üí —Å–µ—Ä–≤–∏—Å ‚Üí –≤—ã–≤–æ–¥)
‚îÇ
‚îú‚îÄ‚îÄ rm/ # üóëÔ∏è –î–æ–º–µ–Ω: —É–¥–∞–ª–µ–Ω–∏–µ
‚îÇ ‚îú‚îÄ‚îÄ engines/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ rm.sh # –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±—ç–∫–∞–ø–æ–≤
‚îÇ ‚îú‚îÄ‚îÄ services/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ __init__.py
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ rm_service.py # rm_ib(), rm_multiple()
‚îÇ ‚îî‚îÄ‚îÄ adapters/cli/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ rm_adapter.py # CLI-–∞–¥–∞–ø—Ç–µ—Ä
‚îÇ
‚îî‚îÄ‚îÄ storage/ # üíæ –î–æ–º–µ–Ω: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –ò–ë
‚îÇ ‚îú‚îÄ‚îÄ engines/
‚îÇ   ‚îú‚îÄ‚îÄ disk_usage.sh # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞ (df)
‚îÇ   ‚îú‚îÄ‚îÄ list_backups.sh # –°–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤ (TSV)
‚îÇ   ‚îú‚îÄ‚îÄ count_backups.sh # –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞/—Ä–∞–∑–º–µ—Ä–∞ –±—ç–∫–∞–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ validate.sh # –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ   ‚îî‚îÄ‚îÄ list_ibs.sh # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ò–ë –∏–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° (rac)
‚îú ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ storage_service.py # get_usage(), get_ib_stats(), update_ib_list()
‚îú ‚îî‚îÄ‚îÄ adapters/cli/
‚îú   ‚îú‚îÄ‚îÄ __init__.py
‚îú   ‚îî‚îÄ‚îÄ storage_adapter.py # CLI-–∞–¥–∞–ø—Ç–µ—Ä (storage, list-ibs, update-ib-list)
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏) —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ config/global.sh  
–û–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (rm, backup, update-ib-list) —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (--confirm)  
–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏ (--dry-run) –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
–£–¥–∞–ª–µ–Ω–∏–µ –ò–ë –∏–∑ ib_list.conf —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –∏—Å—Ç–æ—Ä–∏–∏ –±—ç–∫–∞–ø–æ–≤)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

backup.md ‚Äî –¥–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–∞–ø–∞–º–∏  
cmd.md ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ –∏ —Ñ–ª–∞–≥–æ–≤  
structure.md ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
