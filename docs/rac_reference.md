# üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ rac (1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ 8.3.27)

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ!** –í—Å–µ –∫–æ–º–∞–Ω–¥—ã `rac` –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **`usr1cv8`**:
>
> ```bash
> sudo -u usr1cv8 rac <—Ä–µ–∂–∏–º> <–∫–æ–º–∞–Ω–¥–∞> [–æ–ø—Ü–∏–∏]
> ```

## üîå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

| –£—Å–ª–æ–≤–∏–µ             | –ü—Ä–æ–≤–µ—Ä–∫–∞                           | –†–µ—à–µ–Ω–∏–µ                                                                                  |
| ------------------- | ---------------------------------- | ---------------------------------------------------------------------------------------- |
| **RAS –¥–æ—Å—Ç—É–ø–µ–Ω**    | `sudo -u usr1cv8 rac cluster list` | –ï—Å–ª–∏ ¬´Connection refused¬ª ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å `ras cluster --port=1545 --cluster=127.0.0.1:1541` |
| **–ö–ª–∞—Å—Ç–µ—Ä –∑–∞–ø—É—â–µ–Ω** | `sudo ss -tulpn \| grep ':1541'`   | `sudo systemctl restart 1c-server`                                                       |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**    | `whoami` ‚Üí `usr1cv8`               | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sudo -u usr1cv8`                                                           |

> üí° **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–µ–±- –∏ —Ç–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ `rac` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Å–µ—Ä–≤–∏—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫–ª—é—á—ë–Ω).

# üß© –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

# –ö–ª–∞—Å—Ç–µ—Ä

```bash
# –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
sudo -u usr1cv8 rac cluster list

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
sudo -u usr1cv8 rac cluster info --cluster=<uuid>
```

# –°–ø–∏—Å–æ–∫ –ò–ë

sudo -u usr1cv8 rac infobase summary list --cluster=<uuid>

# –°–æ–∑–¥–∞–Ω–∏–µ –ò–ë (PostgreSQL)

sudo -u usr1cv8 rac infobase create \
 --cluster=<uuid> \
 --name=<–∏–º—è> \
 --dbms=PostgreSQL \
 --db-server=10.129.0.27 \
 --db-name=<–∏–º—è> \
 --db-user=postgres \
 --db-pwd-file=/home/usr1cv8/.pgpass \
 --locale=ru_RU \
 --create-database

# –£–¥–∞–ª–µ–Ω–∏–µ –ò–ë (–ù–ï–û–ë–†–ê–¢–ò–ú–û!)

sudo -u usr1cv8 rac infobase drop \
 --cluster=<uuid> \
 --infobase=<uuid> \
 [--drop-database]

# –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π

sudo -u usr1cv8 rac session list --cluster=<uuid>

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

sudo -u usr1cv8 rac session terminate \
 --cluster=<uuid> \
 --session=<uuid>

# –°–ø–∏—Å–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

sudo -u usr1cv8 rac connection list --cluster=<uuid>

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

sudo -u usr1cv8 rac connection terminate \
 --cluster=<uuid> \
 --connection=<uuid>

# ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞

| ‚Ññ   | –ü—Ä–∞–≤–∏–ª–æ                              | –ü—Ä–∏—á–∏–Ω–∞                                                           |
| --- | ------------------------------------ | ----------------------------------------------------------------- |
| 1   | –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ `--cluster=<uuid>` | –ë–µ–∑ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç                                      |
| 2   | –£–¥–∞–ª–µ–Ω–∏–µ –ò–ë –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ               | –ü–µ—Ä–µ–¥ `drop` –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `uuid` —á–µ—Ä–µ–∑ `summary list`               |
| 3   | –ü–∞—Ä–æ–ª–∏ –ë–î ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª        | `--db-pwd-file`, –Ω–∏–∫–æ–≥–¥–∞ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ                       |
| 4   | –°–µ—Å—Å–∏–∏ ‚â† —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è                  | –ó–∞–≤–µ—Ä—à–∞–π—Ç–µ —á–µ—Ä–µ–∑ `session terminate`, –∞ –Ω–µ `connection terminate` |
| 5   | –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –æ—Ç `usr1cv8`              | –ò–Ω–∞—á–µ ‚Äî –æ—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞                                            |

# üîí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–µ–∫—Ç–æ–º

–í –≥–∏–±—Ä–∏–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ rac –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Bash-–¥–≤–∏–∂–∫–æ–≤ (engines/):

admin1c.py (Python CLI)  
 ‚Üì  
engines/sessions.sh (Bash)  
 ‚Üì  
sudo -u usr1cv8 rac session list/terminate

# –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

–ß–∏—Å—Ç—ã–π Python-–∫–æ–¥ (–±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã–≤–æ–¥–∞ rac)
–ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
–ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∫–∞–∂–¥–æ–≥–æ –¥–≤–∏–∂–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
EOF
