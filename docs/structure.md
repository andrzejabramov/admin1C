```markdown
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ib_1c

–í–µ—Ä—Å–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: `refactor/project-structure`  
–î–∞—Ç–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏: 2026-02-06

---

## üå≥ –î–µ—Ä–µ–≤–æ –ø—Ä–æ–µ–∫—Ç–∞
```

/opt/1cv8/scripts/  
‚îú‚îÄ‚îÄ orchestrator.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ CLI (–µ–¥–∏–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ ib_1c)  
‚îú‚îÄ‚îÄ metrics_collector.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Ñ–æ–Ω–æ–≤—ã–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫)  
‚îú‚îÄ‚îÄ ib_list.conf # –°–ø–∏—Å–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –ò–ë (–æ–¥–Ω–∞ –ò–ë –Ω–∞ —Å—Ç—Ä–æ–∫—É)  
‚îú‚îÄ‚îÄ .version # –í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã (–¥–ª—è --version)  
‚îú‚îÄ‚îÄ requirements.txt # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
‚îú‚îÄ‚îÄ .gitignore # –ü—Ä–∞–≤–∏–ª–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è  
‚îú‚îÄ‚îÄ README.md # –û–ø–∏—Å–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞  
‚îÇ  
‚îú‚îÄ‚îÄ engines/ # –£—Ä–æ–≤–µ–Ω—å 0: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (bash-–¥–≤–∏–∂–∫–∏)  
‚îÇ ‚îú‚îÄ‚îÄ backup.sh # –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ (.dump / .sql.gz)  
‚îÇ ‚îú‚îÄ‚îÄ rm.sh # –†—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ø–∏–π –ò–ë  
‚îÇ ‚îú‚îÄ‚îÄ prune.sh # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –∫–æ–ø–∏–π  
‚îÇ ‚îú‚îÄ‚îÄ cleanup.sh # –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π 1–° —á–µ—Ä–µ–∑ rac  
‚îÇ ‚îú‚îÄ‚îÄ cloud_upload.sh # –ó–∞–≥—Ä—É–∑–∫–∞ –±—ç–∫–∞–ø–æ–≤ –≤ –æ–±–ª–∞–∫–æ (rclone ‚Üí mail.ru)  
‚îÇ ‚îú‚îÄ‚îÄ count_backups.sh # –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞/—Ä–∞–∑–º–µ—Ä–∞ –±—ç–∫–∞–ø–æ–≤ –ø–æ –ò–ë  
‚îÇ ‚îú‚îÄ‚îÄ disk_usage.sh # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞ (df)  
‚îÇ ‚îú‚îÄ‚îÄ list_backups.sh # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤ –≤ TSV-—Ñ–æ—Ä–º–∞—Ç–µ  
‚îÇ ‚îú‚îÄ‚îÄ ssl.sh # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ (certbot)  
‚îÇ ‚îú‚îÄ‚îÄ utils.sh # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏)  
‚îÇ ‚îú‚îÄ‚îÄ validate.sh # –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞  
‚îÇ ‚îî‚îÄ‚îÄ config/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –¥–≤–∏–∂–∫–æ–≤  
‚îÇ ‚îú‚îÄ‚îÄ db_config.sh # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL  
‚îÇ ‚îú‚îÄ‚îÄ db_config.sh.example# –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î  
‚îÇ ‚îî‚îÄ‚îÄ storage.sh # BACKUP_DIR="/var/backups/1c"  
‚îÇ  
‚îú‚îÄ‚îÄ services/ # –£—Ä–æ–≤–µ–Ω—å 1: —á–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)  
‚îÇ ‚îú‚îÄ‚îÄ **init**.py  
‚îÇ ‚îú‚îÄ‚îÄ backup_service.py # –õ–æ–≥–∏–∫–∞ –±—ç–∫–∞–ø–æ–≤ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)  
‚îÇ ‚îú‚îÄ‚îÄ rm_service.py # –õ–æ–≥–∏–∫–∞ —Ä—É—á–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–ø–∏–π  
‚îÇ ‚îú‚îÄ‚îÄ storage_service.py # –õ–æ–≥–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)  
‚îÇ ‚îî‚îÄ‚îÄ validation.py # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º—ë–Ω –ò–ë  
‚îÇ  
‚îú‚îÄ‚îÄ commands/ # –£—Ä–æ–≤–µ–Ω—å 2: —Ç–æ–Ω–∫–∏–µ CLI-–∞–¥–∞–ø—Ç–µ—Ä—ã  
‚îÇ ‚îú‚îÄ‚îÄ **init**.py  
‚îÇ ‚îú‚îÄ‚îÄ backup.py # –ê–¥–∞–ø—Ç–µ—Ä –∫–æ–º–∞–Ω–¥—ã 'backup'  
‚îÇ ‚îú‚îÄ‚îÄ rm.py # –ê–¥–∞–ø—Ç–µ—Ä –∫–æ–º–∞–Ω–¥—ã 'rm'  
‚îÇ ‚îî‚îÄ‚îÄ storage.py # –ê–¥–∞–ø—Ç–µ—Ä –∫–æ–º–∞–Ω–¥—ã 'storage' (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)  
‚îÇ  
‚îú‚îÄ‚îÄ core/ # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)  
‚îÇ ‚îú‚îÄ‚îÄ **init**.py  
‚îÇ ‚îú‚îÄ‚îÄ config.py # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤–µ—Ä—Å–∏—è, –ò–ë, –ø—É—Ç–∏)  
‚îÇ ‚îú‚îÄ‚îÄ engine.py # run_engine() ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤  
‚îÇ ‚îú‚îÄ‚îÄ utils.py # –¶–≤–µ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚îÇ ‚îî‚îÄ‚îÄ exceptions.py # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
‚îÇ  
‚îî‚îÄ‚îÄ docs/  
‚îú‚îÄ‚îÄ cmd.md # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥  
‚îú‚îÄ‚îÄ backup.md # –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–∞–ø–∞–º–∏  
‚îî‚îÄ‚îÄ structure.md # –ù–∞—Å—Ç–æ—è—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—Ñ–∏–∫—Å–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)

````


---

## üìÅ –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `orchestrator.py` | –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –ü–∞—Ä—Å–∏—Ç `ib_1c <command>`, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –≤ `commands/`. –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É. |
| `metrics_collector.py` | –§–æ–Ω–æ–≤—ã–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω). –ë—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏–∑ cron. |
| `ib_list.conf` | –°–ø–∏—Å–æ–∫ –ò–ë –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –§–æ—Ä–º–∞—Ç: –æ–¥–Ω–∞ –ò–ë –Ω–∞ —Å—Ç—Ä–æ–∫—É, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —á–µ—Ä–µ–∑ `#`. |
| `.version` | –í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã –¥–ª—è `ib_1c --version`. –§–æ—Ä–º–∞—Ç: `VERSION="8.3.27.1989"`. |

### –ü–∞–ø–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π

| –ü–∞–ø–∫–∞ | –£—Ä–æ–≤–µ–Ω—å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
|-------|---------|-----------------|-------------|
| `engines/` | 0 (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) | –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ bash (pg_dump, rm, df) | –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (`pg_dump`, `rclone`, `rac`) |
| `services/` | 1 (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) | –ß–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π (–±—ç–∫–∞–ø, —É–¥–∞–ª–µ–Ω–∏–µ). –ù–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. | `core/engine.py`, `core/config.py` |
| `commands/` | 2 (–∞–¥–∞–ø—Ç–µ—Ä—ã) | –¢–æ–Ω–∫–∏–µ –∞–¥–∞–ø—Ç–µ—Ä—ã CLI: –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ‚Üí –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ ‚Üí —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ | `services/*`, `core/utils.py` |
| `core/` | –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã (–Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞!) | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python |

---

## ‚öôÔ∏è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### üì¶ –°–µ—Ä–≤–∏—Å `backup` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

–°–æ–∑–¥–∞—ë—Ç –±—ç–∫–∞–ø—ã –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö PostgreSQL Custom (`dump`) –∏–ª–∏ SQL-–∞—Ä—Ö–∏–≤ (`sql.gz`). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `pg_dump` —á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–Ω–µ–ª—å.

| –ö–æ–º–∞–Ω–¥–∞ | –§–ª–∞–≥–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-------|----------|
| `ib_1c backup` | `--format {dump,sql}`<br>`--ib IB [IB ...]`<br>`--dry-run` | –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ò–ë.<br>‚Ä¢ `dump` ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç PostgreSQL (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)<br>‚Ä¢ `sql` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π SQL-–∞—Ä—Ö–∏–≤ (–ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å)<br>‚Ä¢ `--dry-run` ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ë—ç–∫–∞–ø –æ–¥–Ω–æ–π –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–µ dump
ib_1c backup --format dump --ib artel_2025

# –ë—ç–∫–∞–ø –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ò–ë
ib_1c backup --format dump --ib artel_2025 oksana_2025 resug_2025

# –°–∏–º—É–ª—è—Ü–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
ib_1c backup --format dump --ib artel_2025 --dry-run
## ‚öôÔ∏è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### üì¶ –°–µ—Ä–≤–∏—Å `backup` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

–°–æ–∑–¥–∞—ë—Ç –±—ç–∫–∞–ø—ã –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö PostgreSQL Custom (`dump`) –∏–ª–∏ SQL-–∞—Ä—Ö–∏–≤ (`sql.gz`). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `pg_dump` —á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–Ω–µ–ª—å.

| –ö–æ–º–∞–Ω–¥–∞ | –§–ª–∞–≥–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-------|----------|
| `ib_1c backup` | `--format {dump,sql}`<br>`--ib IB [IB ...]`<br>`--dry-run` | –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ò–ë.<br>‚Ä¢ `dump` ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç PostgreSQL (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)<br>‚Ä¢ `sql` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π SQL-–∞—Ä—Ö–∏–≤ (–ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å)<br>‚Ä¢ `--dry-run` ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ë—ç–∫–∞–ø –æ–¥–Ω–æ–π –ò–ë –≤ —Ñ–æ—Ä–º–∞—Ç–µ dump
ib_1c backup --format dump --ib artel_2025

# –ë—ç–∫–∞–ø –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ò–ë
ib_1c backup --format dump --ib artel_2025 oksana_2025 resug_2025

# –°–∏–º—É–ª—è—Ü–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
ib_1c backup --format dump --ib artel_2025 --dry-run
````

---

### üóëÔ∏è –°–µ—Ä–≤–∏—Å `rm` ‚Äî —Ä—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ø–∏–π

–£–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±—ç–∫–∞–ø—ã –ò–ë –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–µ, –¥–∞—Ç–µ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ. –¢—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è.

| –ö–æ–º–∞–Ω–¥–∞    | –§–ª–∞–≥–∏                                                                                                                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                                          |
| ---------- | ----------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ib_1c rm` | `--ib IB [IB ...]`<br>`--timestamp –ì–ì–ì–ì–ú–ú–î–î_–ß–ß–ú–ú–°–°`<br>`--older-than –ì–ì–ì–ì–ú–ú–î–î`<br>`--all`<br>`--dry-run`<br>`--confirm` | –£–¥–∞–ª–∏—Ç—å –±—ç–∫–∞–ø—ã –ò–ë.<br>‚Ä¢ `--timestamp` ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—ç–∫–∞–ø –ø–æ –º–µ—Ç–∫–µ –≤—Ä–µ–º–µ–Ω–∏<br>‚Ä¢ `--older-than` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ –¥–∞—Ç—ã<br>‚Ä¢ `--all` ‚Äî —É–¥–∞–ª–∏—Ç—å –í–°–ï –±—ç–∫–∞–ø—ã –í–°–ï–• –ò–ë (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)<br>‚Ä¢ `--dry-run` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)<br>‚Ä¢ `--confirm` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è |

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ò–ë (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
ib_1c rm --ib artel_2025 --timestamp 20260203_204828 --dry-run

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—ç–∫–∞–ø (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
ib_1c rm --ib artel_2025 --timestamp 20260203_204828 --confirm

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 1 —è–Ω–≤–∞—Ä—è 2026
ib_1c rm --ib artel_2025 --older-than 20260101 --confirm

# ‚ö†Ô∏è –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –í–°–ï–• –±—ç–∫–∞–ø–æ–≤ –í–°–ï–• –ò–ë (—Ç—Ä–µ–±—É–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ --confirm)
ib_1c rm --all --confirm
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ë–µ–∑ `--confirm` —Ä–µ–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å –¥–∞–Ω–Ω—ã—Ö.  
> üí° –§–ª–∞–≥ `--all` –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –¥–≤–∏–∂–æ–∫ `rm.sh`. CLI-–∞–¥–∞–ø—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é.

---

### üíæ –°–µ—Ä–≤–∏—Å `storage` ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ _(–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)_

–°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, —Å–ø–∏—Å–∫—É –±—ç–∫–∞–ø–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

| –ö–æ–º–∞–Ω–¥–∞         | –§–ª–∞–≥–∏         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                         |
| --------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ib_1c storage` | `--path –ü–£–¢–¨` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.<br>‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ (`df`)<br>‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ò–ë (—Ä–∞–∑–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ø–∏–π)<br>‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è (`validate.sh`) |

**–ü—Ä–∏–º–µ—Ä—ã (–ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏):**

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (/var/backups/1c)
ib_1c storage

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—É—Ç–∏
ib_1c storage --path /mnt/backup/1c
```

> üí° **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:** `disk_usage.sh`, `list_backups.sh`, `count_backups.sh`, `validate.sh`

---

## üîë –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**  
   –ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å–ª–æ—è—Ö –≤—ã—à–µ:  
   ‚Ä¢ `engines/` ‚Üê –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ `services/`  
   ‚Ä¢ `services/` ‚Üê –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ `commands/`  
   ‚Ä¢ `commands/` ‚Üê –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

2. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã**  
   –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ `services/`. –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (CLI, Web, Telegram) –≤—ã–∑—ã–≤–∞—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Å–µ—Ä–≤–∏—Å—ã.

3. **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**  
   ‚Ä¢ `services/` –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç `core/`  
   ‚Ä¢ `commands/` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `services/` + `core/`  
   ‚Ä¢ `engines/` –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Python-–∫–æ–¥–∞

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**  
   –û–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (`rm`, `backup`) —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ `--dry-run` –±–µ–∑ —Ñ–ª–∞–≥–∞ `--confirm`.

---

## üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–≤–∏–∂–∫–æ–≤ engines/

| –î–≤–∏–∂–æ–∫             | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑                        |
| ------------------ | ------------------------------------------ | ------------------------------------ |
| `backup.sh`        | –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ —á–µ—Ä–µ–∑ `pg_dump`           | `services/backup_service.py`         |
| `rm.sh`            | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±—ç–∫–∞–ø–æ–≤                    | `services/rm_service.py`             |
| `prune.sh`         | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è (—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö)   | –ë—É–¥—É—â–∏–π —Å–µ—Ä–≤–∏—Å `prune`               |
| `cleanup.sh`       | –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π 1–° —á–µ—Ä–µ–∑ `rac`   | –í–Ω–µ—à–Ω–∏–π –≤—ã–∑–æ–≤ (cron)                 |
| `cloud_upload.sh`  | –û—Ç–ø—Ä–∞–≤–∫–∞ –±—ç–∫–∞–ø–æ–≤ –≤ –æ–±–ª–∞–∫–æ (rclone)         | –í–Ω–µ—à–Ω–∏–π –≤—ã–∑–æ–≤ (cron)                 |
| `count_backups.sh` | –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞/—Ä–∞–∑–º–µ—Ä–∞ –±—ç–∫–∞–ø–æ–≤ (TSV)   | `services/storage_service.py` (–ø–ª–∞–Ω) |
| `disk_usage.sh`    | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞ (`df` –≤ –ø–∞—Ä—Å–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ) | `services/storage_service.py` (–ø–ª–∞–Ω) |
| `list_backups.sh`  | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤ (TSV)                  | `services/storage_service.py` (–ø–ª–∞–Ω) |
| `ssl.sh`           | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ (certbot)         | –í–Ω–µ—à–Ω–∏–π –≤—ã–∑–æ–≤ (cron)                 |
| `utils.sh`         | –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏)      | –í—Å–µ –¥–≤–∏–∂–∫–∏ —á–µ—Ä–µ–∑ `source`            |
| `validate.sh`      | –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞              | `services/storage_service.py` (–ø–ª–∞–Ω) |

```

---
```
